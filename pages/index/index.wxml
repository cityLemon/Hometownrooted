<!--index.wxml-->
<page-meta>
  <navigation-bar title="ä¹¡æ‘å®‰åœŸ"></navigation-bar>
</page-meta>

<!-- é¡µé¢åŠ è½½åŠ¨ç”» -->
<view class="page-loader {{pageLoaded ? 'hidden' : ''}}">
  <view class="loader-spinner"></view>
  <text class="loader-text">åŠ è½½ä¸­...</text>
</view>

<!-- ç¦»çº¿çŠ¶æ€æç¤º -->
<view class="offline-tip" wx:if="{{offline}}">
  å½“å‰å¤„äºç¦»çº¿çŠ¶æ€ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™
</view>

<!-- è½®æ’­å›¾ -->
<view class="swiper-container">
  <swiper 
    indicator-dots="{{true}}" 
    autoplay="{{true}}" 
    interval="3000" 
    duration="800"
    circular="{{true}}"
    class="swiper"
    indicator-active-color="#ffffff"
    indicator-color="rgba(255, 255, 255, 0.5)"
  >
    <swiper-item 
      wx:for="{{swiperList}}" 
      wx:key="id"
      data-url="{{item.url}}"
      bindtap="swiperItemTap"
      class="swiper-item"
    >
      <image src="{{item.image}}" mode="aspectFill" class="swiper-image"></image>
      <!-- æ¸å˜å åŠ å±‚ -->
      <view class="swiper-overlay"></view>
      <!-- è½®æ’­æ ‡é¢˜ï¼Œæ·»åŠ åŠ¨ç”» -->
      <view class="swiper-content">
        <view class="swiper-title fade-in-up">{{item.title}}</view>
      </view>
    </swiper-item>
  </swiper>
</view>

<!-- ä¸»è¦å†…å®¹ -->
<view class="main-content">
  <!-- è§’è‰²é€‰æ‹© -->
  <view class="section card">
    <view class="section-title font-xl font-bold text-primary">è¯·é€‰æ‹©æ‚¨çš„è§’è‰²</view>
    <view class="role-list">
      <view 
        wx:for="{{roles}}" 
        wx:key="id"
        class="role-item card aging-friendly"
        data-role-id="{{item.id}}"
        bindtap="selectRole"
        data-index="{{index}}"
        animation="{{roleAnimations[index]}}"
        style="background-color: {{selectedRole === item.id ? 'var(--primary-lightest)' : 'var(--bg-primary)'}};"
      >
        <!-- é€‰ä¸­çŠ¶æ€æŒ‡ç¤ºå™¨ -->
        <view class="role-select-indicator" wx:if="{{selectedRole === item.id}}">
          <text class="select-icon">âœ“</text>
        </view>
        <!-- è§’è‰²å›¾æ ‡å®¹å™¨ -->
        <view class="role-icon-container">
          <view class="role-icon">
            <image src="{{item.icon}}" mode="aspectFit"></image>
          </view>
        </view>
        <!-- è§’è‰²ä¿¡æ¯ -->
        <view class="role-info">
          <view class="role-name font-lg font-bold text-primary">{{item.name}}</view>
          <view class="role-description font-sm text-secondary">{{item.description}}</view>
        </view>
        <!-- è£…é¥°å…ƒç´  -->
        <view class="role-decoration"></view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·å…¥å£ -->
  <view class="section card">
    <view class="section-title font-xl font-bold text-primary">å¿«æ·å…¥å£</view>
    <view class="quick-entrance-grid">
      <view 
        wx:for="{{quickEntrances}}" 
        wx:key="id"
        class="quick-entrance-item aging-friendly"
        data-url="{{item.url}}"
        bindtap="quickEntranceTap"
        style="background-color: var(--bg-secondary);"
      >
        <view class="quick-entrance-icon">
          <image src="{{item.icon}}" mode="aspectFit"></image>
        </view>
        <view class="quick-entrance-name font-base text-primary">{{item.name}}</view>
      </view>
      <!-- è¿›å…¥æŒ‰é’® -->
      <view class="quick-entrance-item enter-btn-item aging-friendly">
        <button 
          class="btn btn-primary btn-full font-lg font-bold"
          bindtap="enterRole"
          disabled="{{!selectedRole}}"
          animation="{{enterButtonAnimation}}"
          style="width: 100%; height: 100%;"
        >
          è¿›å…¥ç³»ç»Ÿ
        </button>
      </view>
    </view>
  </view>
</view>

<!-- è¯­éŸ³å¯¼èˆªæŒ‰é’® -->
<view class="voice-nav-btn" bindtap="voiceNav">
  <text class="font-xl">ğŸ¤</text>
</view>
