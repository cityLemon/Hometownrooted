# 底部导航栏图标不显示问题修复

## 问题原因分析

经过分析，发现底部导航栏图标不显示的原因是：

1. **自动重定向逻辑**：在 `pages/index/index.js` 的 `checkLoginStatus()` 方法中，如果检测到用户已登录，会自动重定向到其他页面，导致用户看不到index页面的tabBar。

2. **登录状态检查**：应用启动时会检查本地存储中的token和userInfo，如果存在这些数据，会自动跳转到对应角色的页面。

## 解决方案

### 临时解决方案（已实施）

1. **禁用自动重定向**：已临时注释掉 `checkLoginStatus()` 中的自动重定向逻辑，让用户可以看到index页面的tabBar。

2. **添加调试工具**：在index页面右上角添加了调试面板（⚙️图标），包含：
   - 清除登录数据按钮
   - 隐藏面板功能

### 使用方法

1. **清除登录数据**：
   - 打开index页面
   - 点击右上角的⚙️图标
   - 点击"清除登录数据"按钮
   - 应用会自动重启并显示正常的tabBar

2. **恢复自动重定向**：
   - 如果需要恢复原来的自动重定向功能，请取消注释 `checkLoginStatus()` 方法中的相关代码

### 长期解决方案

1. **开发环境**：可以在微信开发者工具中开启"不校验合法域名"选项，便于本地开发测试。

2. **生产环境**：
   - 部署HTTPS后端服务
   - 在微信公众平台配置request合法域名
   - 确保所有API请求都使用HTTPS协议

## 文件修改记录

1. `pages/index/index.js` - 禁用自动重定向，添加调试功能
2. `pages/index/index.wxml` - 添加调试面板UI
3. `pages/index/index.wxss` - 添加调试面板样式

## 注意事项

- 调试功能仅供开发测试使用，发布前应移除
- 确保所有图标文件存在于 `images/tabbar/` 目录下
- 检查app.json中的tabBar配置是否正确